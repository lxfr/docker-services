FROM ubuntu:trusty
ARG S3_BUCKET_NAME
ARG S3_FOLDER
ARG AWS_ACCESS_KEY_ID
ARG AWS_SECRET_ACCESS_KEY
ARG AWS_DEFAULT_REGION
ARG PATHS_TO_BACKUP
ARG BACKUP_NAME
ARG RESTORE
RUN apt-get update && apt-get install -y python-pip && pip install awscli
ENV S3_BUCKET_NAME $S3_BUCKET_NAME
ENV S3_FOLDER $S3_FOLDER
ENV AWS_ACCESS_KEY_ID $AWS_ACCESS_KEY_ID
ENV AWS_SECRET_ACCESS_KEY $AWS_SECRET_ACCESS_KEY
ENV AWS_DEFAULT_REGION $AWS_DEFAULT_REGION
ENV PATHS_TO_BACKUP $PATHS_TO_BACKUP
ENV BACKUP_NAME $BACKUP_NAME
ENV RESTORE $RESTORE
ADD source/dockup/backup.sh /backup.sh
ADD source/dockup/restore.sh /restore.sh
ADD source/dockup/run.sh /run.sh
RUN chmod 755 /*.sh
CMD ["/run.sh"]